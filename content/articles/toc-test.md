---
title: TOC 导航功能测试
date: 2025-08-21
summary: 测试目录导航和标题高亮功能
tags: [测试, 导航, TOC]
author: 测试团队
---

# TOC 导航功能测试

这是一篇用于测试 TOC（Table of Contents）导航功能的文章。

## 第一部分：介绍

这是第一部分的内容。当你点击左侧目录中的"第一部分：介绍"时，页面应该平滑滚动到这里，并且这个标题会被高亮显示。

### 1.1 功能说明

TOC 导航功能包括以下特性：

- 自动生成目录
- 平滑滚动
- 标题高亮
- 键盘导航支持

### 1.2 技术实现

使用了以下技术：

- React hooks
- Intersection Observer API
- rough-notation 库
- Tailwind CSS

## 第二部分：详细功能

这是第二部分的内容。

### 2.1 点击导航

点击目录项时会发生以下事情：

1. 页面平滑滚动到对应标题
2. 标题被黄色高亮显示
3. URL 更新为带有锚点的地址
4. 高亮效果在 4 秒后自动消失

### 2.2 键盘支持

支持以下键盘操作：

- **Tab**: 在目录项之间切换焦点
- **Enter/Space**: 激活当前焦点的目录项
- **Arrow Up/Down**: 上下导航
- **Home/End**: 跳转到第一个/最后一个项

### 2.3 视觉反馈

提供多种视觉反馈：

- 当前章节在目录中高亮
- 导航时的脉冲动画
- 标题的高亮动画
- 滚动进度条

## 第三部分：高级特性

这是第三部分的内容。

### 3.1 响应式设计

TOC 在不同设备上的表现：

- **桌面端**: 固定在左侧，可折叠
- **移动端**: 滑出式抽屉
- **平板**: 自适应布局

### 3.2 无障碍支持

完整的无障碍支持：

- ARIA 标签
- 键盘导航
- 屏幕阅读器兼容
- 高对比度模式

### 3.3 性能优化

多项性能优化措施：

- 防抖和节流
- 虚拟滚动（如需要）
- 懒加载
- 内存管理

## 第四部分：使用示例

这是第四部分的内容。

### 4.1 基础用法

最简单的使用方式就是在 Markdown 文件中正常编写标题，系统会自动生成目录。

```markdown
# 一级标题
## 二级标题
### 三级标题
#### 四级标题
```

### 4.2 高级配置

可以通过配置来自定义行为：

```javascript
const tocConfig = {
  maxLevel: 4,        // 最大标题级别
  smooth: true,       // 平滑滚动
  highlight: true,    // 启用高亮
  duration: 4000      // 高亮持续时间
};
```

### 4.3 自定义样式

可以通过 CSS 自定义样式：

```css
.toc-item {
  padding: 0.5rem;
  transition: all 0.3s;
}

.toc-item:hover {
  background: rgba(0, 0, 0, 0.05);
}

.toc-item.active {
  color: #3b82f6;
  font-weight: 600;
}
```

## 第五部分：常见问题

这是第五部分的内容。

### 5.1 滚动位置不准确？

如果滚动位置不准确，可能是因为：

- 页面有固定头部
- 图片延迟加载导致高度变化
- 动态内容影响布局

### 5.2 高亮效果不显示？

检查以下几点：

- rough-notation 库是否正确安装
- 标题元素是否有正确的 ID
- 主题模式检测是否正常

### 5.3 键盘导航不工作？

确保：

- 焦点管理正确实现
- 没有其他元素拦截键盘事件
- ARIA 属性正确设置

## 总结

TOC 导航功能大大提升了长文章的阅读体验。通过平滑滚动、视觉高亮、键盘支持等特性，用户可以更轻松地浏览和定位内容。

---

*测试提示：尝试点击左侧目录的不同项目，观察滚动和高亮效果。也可以使用键盘进行导航。*
